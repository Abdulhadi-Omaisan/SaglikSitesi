<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ù„ÙŠÙ„ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª - HASTANE</title>
    <style>
        /* ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù…Ø¹ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        :root {
            --primary: #1b4332; /* Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„ØºØ§Ù…Ù‚ Ø§Ù„ÙØ®Ù… */
            --secondary: #2d6a4f;
            --bg: #f8f9fa;
            --white: #ffffff;
            --accent-green: #d8f3dc;
            --open-color: #2ecc71;
            --closed-color: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: var(--bg);
            color: #333;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ÙˆØ­Ø¯ */
        header {
            background-color: var(--white);
            padding: 15px 8%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo { font-size: 1.8rem; font-weight: 800; color: var(--primary); text-decoration: none; }
        
        nav a { 
            text-decoration: none; 
            color: var(--primary); 
            font-weight: 600; 
            padding: 8px 15px;
            border-radius: 8px;
            transition: 0.3s;
        }
        nav a:hover { background-color: var(--accent-green); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
        .hero-title {
            background: var(--primary);
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 40px;
            border-radius: 0 0 40px 40px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto 50px;
            padding: 0 20px;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª */
        .pharmacy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        /* ÙƒØ±Øª Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© Ø¨ØªØµÙ…ÙŠÙ… "Ù…ÙˆØ¯Ø±Ù†" */
        .pharmacy-card {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 1px solid #eee;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .pharmacy-card:hover {
            transform: translateY(-10px);
            border-color: var(--secondary);
        }

        .pharmacy-card h3 { 
            color: var(--primary); 
            margin-top: 0; 
            font-size: 1.4rem;
        }

        /* ØªÙ…ÙŠÙŠØ² Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© */
        .nobetci-card {
            background: var(--accent-green) !important;
            border: 2px solid var(--secondary) !important;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: bold;
            color: white;
            margin-top: 15px;
        }

        .open { background-color: var(--open-color); }
        .closed { background-color: var(--closed-color); }

        .info { 
            margin: 12px 0; 
            font-size: 0.95rem; 
            color: #555; 
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-map {
            display: block;
            margin-top: 20px;
            text-align: center;
            background: var(--primary);
            color: white;
            text-decoration: none;
            padding: 12px;
            border-radius: 10px;
            font-weight: bold;
            transition: 0.3s;
        }
        
        .btn-map:hover { background: var(--secondary); }

        .nobetci-star {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>

<header>
    <a href="/index.html" class="logo">HASTANE</a>
    <nav><a href="/index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></nav>
</header>

<div class="hero-title">
    <h1>Ø¯Ù„ÙŠÙ„ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª ÙÙŠ ÙƒØ§Ø±Ø§Ø¨ÙˆÙƒ</h1>
    <p>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ù‚Ø±Ø¨ ØµÙŠØ¯Ù„ÙŠØ© ÙˆÙ…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø­Ø¯Ø«Ø©</p>
</div>

<div class="container">
    <div class="pharmacy-grid" id="pharmacyList">
        </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
    // 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ù…ÙˆØ­Ø¯Ø©
    const firebaseConfig = {
        apiKey: "AIzaSyBD2Ge6v0TStampv_l_bRGnzTDVPKvCW20",
        authDomain: "hastane-b2c48.firebaseapp.com",
        projectId: "hastane-b2c48",
        storageBucket: "hastane-b2c48.firebasestorage.app",
        messagingSenderId: "788913029956",
        appId: "1:788913029956:web:84c2f36a5569c85bfd8d11"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 2. Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ©
    const pharmacies = [
        {
            name: "ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ø´ÙØ§Ø¡",
            location: "Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙŠØµÙ„ØŒ ÙˆØ³Ø· Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",
            openTime: 8,
            closeTime: 23,
            mapUrl: "https://maps.google.com"
        },
        {
            name: "ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ø£Ù…Ù„ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©",
            location: "Ø­ÙŠ Ø§Ù„Ø±ÙˆØ¶Ø©ØŒ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¹Ø§Ù…",
            openTime: 0,
            closeTime: 24,
            mapUrl: "https://maps.google.com"
        }
    ];

    function renderPharmacies() {
        const listContainer = document.getElementById('pharmacyList');
        const currentHour = new Date().getHours();

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ù…Ù† Firebase (Live)
        db.collection("settings").doc("pharmacy").onSnapshot((doc) => {
            listContainer.innerHTML = ""; 

            // Ø¥Ø¶Ø§ÙØ© ÙƒØ±Øª Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ø£ÙˆÙ„Ø§Ù‹ Ø¨ØªØµÙ…ÙŠÙ… Ù…Ù…ÙŠØ²
            if (doc.exists) {
                const data = doc.data();
                listContainer.innerHTML += `
                    <div class="pharmacy-card nobetci-card">
                        <span class="nobetci-star">ğŸŒŸ</span>
                        <h3>ØµÙŠØ¯Ù„ÙŠØ© Ù…Ù†Ø§ÙˆØ¨Ø© Ø§Ù„Ø¢Ù†</h3>
                        <p class="info"><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${data.name}</p>
                        <p class="info">ğŸ“ ${data.location || 'ÙƒØ§Ø±Ø§Ø¨ÙˆÙƒ - ÙˆØ³Ø· Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©'}</p>
                        <span class="status-badge open">Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ø¢Ù† (Ù…Ù†Ø§ÙˆØ¨Ø©)</span>
                        <a href="${data.location}" target="_blank" class="btn-map">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ğŸ“</a>
                    </div>
                `;
            }

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
            pharmacies.forEach(pharmacy => {
                const isOpen = (pharmacy.openTime === 0 && pharmacy.closeTime === 24) || 
                               (currentHour >= pharmacy.openTime && currentHour < pharmacy.closeTime);
                
                const statusText = isOpen ? "Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†" : "Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹";
                const statusClass = isOpen ? "open" : "closed";

                listContainer.innerHTML += `
                    <div class="pharmacy-card">
                        <h3>${pharmacy.name}</h3>
                        <p class="info">ğŸ“ ${pharmacy.location}</p>
                        <p class="info">â° Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯: ${pharmacy.openTime}:00 - ${pharmacy.closeTime}:00</p>
                        <span class="status-badge ${statusClass}">${statusText}</span>
                        <a href="${pharmacy.mapUrl}" target="_blank" class="btn-map">Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a>
                    </div>
                `;
            });
        });
    }

    renderPharmacies();
</script>

</body>

</html>
