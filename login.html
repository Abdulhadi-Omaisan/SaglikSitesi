<!DOCTYPE html>
<html lang="ar" dir="rtl" id="main-html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - HASTANE</title>
    <style>
        :root { --primary: #1b4332; --bg: #f8f9fa; }
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            flex-direction: column;
            transition: 0.3s;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ© */
        .lang-switcher { display: flex; gap: 5px; margin-bottom: 20px; }
        .lang-btn { cursor: pointer; border: 1px solid #ddd; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; background: #fff; font-weight: bold; }
        .lang-btn:hover { background: #d8f3dc; }

        .login-card { 
            background: white; 
            padding: 40px; 
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            width: 350px; 
            text-align: center; 
        }
        .logo-area { font-size: 2rem; font-weight: bold; color: var(--primary); margin-bottom: 20px; }
        input { 
            width: 100%; padding: 12px; margin: 10px 0; 
            border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; 
        }
        button { 
            width: 100%; padding: 12px; background: var(--primary); 
            color: white; border: none; border-radius: 10px; 
            cursor: pointer; font-size: 1rem; font-weight: bold; transition: 0.3s;
        }
        button:hover { background: #2d6a4f; }
        .error { color: #e74c3c; font-size: 0.85rem; display: none; margin-top: 10px; }
        .back-link { margin-top: 20px; text-decoration: none; color: #666; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="lang-switcher">
    <button class="lang-btn" onclick="setLanguage('ar')">AR</button>
    <button class="lang-btn" onclick="setLanguage('tr')">TR</button>
    <button class="lang-btn" onclick="setLanguage('en')">EN</button>
</div>

<div class="login-card">
    <div class="logo-area">ğŸ¥ HASTANE</div>
    <h3 id="staff-header" style="color: #333; margin-bottom: 20px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
    
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    
    <p id="errorMsg" class="error">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!</p>
    
    <button id="loginBtn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<a href="index.html" class="back-link" id="back-link">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBD2Ge6v0TStampv_l_bRGnzTDVPKvCW20",
    authDomain: "hastane-b2c48.firebaseapp.com",
    projectId: "hastane-b2c48",
    storageBucket: "hastane-b2c48.firebasestorage.app",
    messagingSenderId: "788913029956",
    appId: "1:788913029956:web:84c2f36a5569c85bfd8d11"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù„ØºØ§Øª
  const translations = {
    ar: {
        title: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - HASTANE",
        staffHeader: "Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",
        email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
        pass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
        loginBtn: "Ø¯Ø®ÙˆÙ„",
        error: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!",
        back: "â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        check: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...",
        alert: "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù…Ù„Ø©",
        dir: "rtl"
    },
    tr: {
        title: "GiriÅŸ Yap - HASTANE",
        staffHeader: "Personel GiriÅŸi",
        email: "E-posta",
        pass: "Åifre",
        loginBtn: "GiriÅŸ Yap",
        error: "HatalÄ± e-posta veya ÅŸifre!",
        back: "â† Ana Sayfaya DÃ¶n",
        check: "Kontrol ediliyor...",
        alert: "LÃ¼tfen tÃ¼m bilgileri doldurun",
        dir: "ltr"
    },
    en: {
        title: "Login - HASTANE",
        staffHeader: "Staff Login",
        email: "Email Address",
        pass: "Password",
        loginBtn: "Login",
        error: "Invalid email or password!",
        back: "â† Back to Home Page",
        check: "Verifying...",
        alert: "Please fill in all fields",
        dir: "ltr"
    }
  };

  function setLanguage(lang) {
      localStorage.setItem('lang', lang);
      const t = translations[lang];
      const html = document.getElementById('main-html');
      
      html.dir = t.dir;
      html.lang = lang;
      
      document.getElementById('page-title').innerText = t.title;
      document.getElementById('staff-header').innerText = t.staffHeader;
      document.getElementById('email').placeholder = t.email;
      document.getElementById('password').placeholder = t.pass;
      document.getElementById('loginBtn').innerText = t.loginBtn;
      document.getElementById('errorMsg').innerText = t.error;
      document.getElementById('back-link').innerText = t.back;
  }

  function login() {
      const lang = localStorage.getItem('lang') || 'ar';
      const t = translations[lang];
      
      const email = document.getElementById('email').value;
      const pass = document.getElementById('password').value;
      const btn = document.getElementById('loginBtn');
      const errorMsg = document.getElementById('errorMsg');

      if(!email || !pass) {
          alert(t.alert);
          return;
      }

      btn.disabled = true;
      btn.innerText = t.check;
      errorMsg.style.display = 'none';

      auth.signInWithEmailAndPassword(email, pass)
          .then((userCredential) => {
              if(email.includes("admin")) {
                  localStorage.setItem('role', 'admin');
                  location.href = 'dashboard-admin.html';
              } else {
                  localStorage.setItem('role', 'doctor');
                  location.href = 'dashboard-doctor.html';
              }
          })
          .catch((error) => {
              errorMsg.style.display = 'block';
              btn.disabled = false;
              btn.innerText = t.loginBtn;
          });
  }

  // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø£Ùˆ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
  const savedLang = localStorage.getItem('lang') || 'ar';
  setLanguage(savedLang);
</script>
</body>
</html>
